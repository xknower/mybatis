<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.apache.ibatis.submitted.orphan_result_maps.SeparateCollectionMapper">
  <select id="selectBlogWithPosts" resultMap="BlogResultMap">
        select
            b.id as blog_id, b.title as blog_title,
            p.id as post_id, p.body as post_body
        from blog b
        left join post p on b.id = p.blog_id
        where b.id = #{id}
    </select>

  <resultMap id="BlogResultMap" type="Blog">
    <constructor>
      <idArg column="blog_id" name="id"/>
      <arg column="blog_title" name="title"/>
    </constructor>
    <collection property="posts" resultMap="PostResultMap"/>
  </resultMap>

  <resultMap id="PostResultMap" type="Post">
    <constructor>
      <idArg column="post_id" name="id"/>
      <arg column="post_body" name="body"/>
    </constructor>
  </resultMap>


</mapper>
